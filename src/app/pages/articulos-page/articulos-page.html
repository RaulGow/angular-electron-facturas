<div class="articulos-page">
    <div class="header">
        <div class="header-left">
            <h1>Articulos</h1>
            <p>Edicion de articulos del sistema.</p>
        </div>

        <div class="header-right">
            <p class="date">{{ fechaFormateada }}</p>

        </div>
    </div>

    <div class="actions">
        <app-action-button
          label="Volver al Panel"
          icon="assets/icons/arrow-go-back-fill.svg"
          variant="primary"
          link="/dashboard"
          [isWhiteIcon]="true">
        </app-action-button>

        <app-action-button
          label="Añadir Artículo"
          icon="assets/icons/add-circle-line.svg"
          variant="secondary"
          (onClick)="showModal.set(true)">
        </app-action-button>

        <app-action-button
          label="Modificar Artículo"
          icon="assets/icons/draft-line.svg"
          variant="secondary"
          (onClick)="miFuncionParaAbrirModal()">
        </app-action-button>
    </div>

    <div class="sumary">
      <table class="sumary-table">
        <thead>
          <tr>
            <th class="sumary-table-number">Ref.</th>
            <th>Descripción</th>
            <th>Categoría</th>
            <th>Stock</th>
            <th>Precio</th>
            <th>IVA</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          @for (art of articulos; track art.id) {
            <tr>
              <td class="sumary-table-number">#{{ art.id.toString().padStart(4, '0') }}</td>
              <td class="sumary-table-description">{{ art.nombre }}</td>
              <td>
                <span class="badge-categoria" [ngClass]="getCategoryClass(art.categoria)">{{ art.categoria }}</span>
              </td>
              <td>{{ art.stock }} <small>{{ art.unidadMedida }}</small></td>
              <td class="sumary-table-price">
                <span>{{ art.precio_venta.toFixed(2) }}€</span>
              </td>
              <td>
                <span class="iva-info">({{ art.iva }}% IVA)</span>
              </td>
              <td>
                <div class="table-row-actions">
                  <button class="edit-btn" (click)="miFuncionParaAbrirModal()">
                    Editar
                  </button>
                </div>
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="6" style="text-align: center; padding: 2rem;">
                No hay artículos disponibles.
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
</div>

<!-- modal -->
<app-custom-modal
  title="Añadir a Charcutería"
  [isOpen]="showModal()"
  btnPrimaryLabel="Guardar Producto"
  btnSecondaryLabel="Volver"
  btnExtraLabel="Ayuda"
  (onPrimary)="guardarArticulo()"
  (onSecondary)="showModal.set(false)"
  (onClose)="showModal.set(false)"
>
  <div class="formulario-charcuteria">
  <p class="form-instruction">Introduce los datos del nuevo embutido:</p>
  
  <div class="input-group">
    <label>Nombre del Producto</label>
    <input type="text" placeholder="Ej. Jamón Serrano Reserva..." class="custom-input">
  </div>

  <div class="input-group">
    <label>Categoría</label>
    <div class="select-wrapper">
      <select class="custom-select">
        <option value="" disabled selected>Selecciona una categoría</option>
        <option>Quesos</option>
        <option>Embutidos Frescos</option>
        <option>Embutidos Curados</option>
      </select>
    </div>
  </div>
</div>
</app-custom-modal>